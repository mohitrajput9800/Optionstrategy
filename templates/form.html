<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Options Strategy Generator</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="https://fonts.googleapis.com/css?family=Inter:400,600&display=swap" rel="stylesheet">
  <style>
    body {
      background: linear-gradient(120deg, #d7f9ff 0%, #a6f6cb 55%, #4fa7ee 100%);
      font-family: 'Inter', Arial, sans-serif;
      margin: 0;
      min-height: 100vh;
      color: #233658;
      position: relative;
      overflow-x: hidden;
    }
    .watermark-bg {
      position: fixed;
      inset: 0;
      z-index: 0;
      pointer-events: none;
      user-select: none;
      opacity: 0.13;
      background: repeating-linear-gradient(
        60deg,
        transparent 0px 120px,
        #b2e2ea0d 120px 128px,
        transparent 128px 170px
      );
    }
    .watermark-bg::before {
      content: "Rajput   Rajput   Rajput   Rajput   Rajput   Rajput   Rajput ";
      position: absolute;
      top: 28px; left: 0; right: 0;
      font-size: 2.1rem;
      font-weight: 800;
      font-family: 'Inter', Segoe UI, Arial, sans-serif;
      text-align: center;
      letter-spacing: 2em;
      opacity: 0.21;
      white-space: nowrap;
      background: linear-gradient(90deg,#43e7bc 0%, #36aebb 100%);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      pointer-events: none;
      user-select: none;
    }
    .watermark-bg::after {
      content: "Rajput   Rajput   Rajput   Rajput   Rajput";
      position: absolute;
      bottom: 28px; left: 0; right: 0;
      font-size: 1.7rem;
      font-weight: 700;
      font-family: 'Inter', Segoe UI, Arial, sans-serif;
      text-align: center;
      letter-spacing: 1.5em;
      opacity: 0.14;
      white-space: nowrap;
      background: linear-gradient(90deg,#b9efdb 5%,#2bb2f9 95%);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      pointer-events: none;
      user-select: none;
    }
    header {
      text-align: center;
      padding: 32px 0 16px 0;
      background: #effcff;
      box-shadow: 0 4px 18px #b0e6db1a;
      position: relative;
      z-index: 2;
    }
    header h1 {
      font-size: 2.5rem;
      margin: 0;
      color: #077880;
      letter-spacing: 1px;
      font-weight: 700;
      background: linear-gradient(90deg,#43e7bc 40%, #36aebb 100%);
      background-clip:text;
      -webkit-background-clip:text; -webkit-text-fill-color:transparent;
    }
    header p {
      font-size: 1.1rem;
      color: #2b699a;
      margin: 12px 0 0 0;
    }
    .container {
      max-width: 650px;
      margin: 32px auto 36px auto;
      background: #fff;
      border-radius: 24px;
      box-shadow: 0 8px 38px #86c0e924;
      padding: 38px 30px 28px 30px;
      position: relative;
      z-index: 2;
    }
    form {
      width: 100%;
    }
    .row {
      display: flex;
      gap: 22px;
      margin-bottom: 19px;
      flex-wrap: wrap;
    }
    .col {
      flex: 1;
      min-width: 220px;
      display: flex;
      flex-direction: column;
      margin-bottom: 7px;
    }
    label {
      color: #229ebe;
      font-weight: 600;
      margin-bottom: 5px;
      font-size: 1rem;
    }
    input, select {
      font-size: 1.07rem;
      border: 1.45px solid #bdeff9;
      border-radius: 8px;
      padding: 11px 12px;
      background: #f6fbfc;
      color: #227773;
      outline: none;
      margin-bottom: 1px;
      transition: border 0.18s;
    }
    input:focus, select:focus {
      border-color: #44e7bc;
      background: #ecfff7;
    }
    input[readonly] {
      background: #eeeeee;
      color: #82a2aa;
    }
    .actions {
      text-align: center;
      margin-top: 32px;
    }
    button {
      background: linear-gradient(90deg, #43e7bc 40%, #36aebb 100%);
      color: #fff;
      font-size: 1.18rem;
      font-family: inherit;
      border-radius: 50px;
      border: none;
      padding: 15px 56px;
      cursor: pointer;
      font-weight: 600;
      letter-spacing: 0.5px;
      box-shadow: 0 6px 18px #79e7e722;
      transition: background 0.18s, transform 0.13s;
    }
    button:hover {
      background: linear-gradient(90deg, #41d8be 30%, #158ced 90%);
      transform: translateY(-2px) scale(1.025);
    }
    .note {
      color: #128973;
      font-size: 0.99rem;
      margin: 3px 0 17px 0;
    }
    footer {
      text-align: center;
      font-size: 0.97rem;
      background: linear-gradient(90deg,#4fa7ee 0%,#96f1cd 100%);
      color: #1c464b;
      margin-top: 42px;
      letter-spacing: 0.3px;
      font-weight: 400;
      z-index: 2;
      position: relative;
      padding:10px 0;
    }
    .brand {
      font-weight: 700;
      color: #077880;
      letter-spacing: 0.34px;
      margin-left: 3px;
    }
    @media (max-width: 700px){
      .container{padding:18px 2vw;}
      .watermark-bg::before, .watermark-bg::after {font-size:1.2rem;letter-spacing:1em;}
    }
    @media (max-width: 500px){
      .container{padding:5px 0;}
      header h1{font-size:2rem;}
      .watermark-bg::before, .watermark-bg::after {font-size:0.82rem;}
    }
  </style>
</head>
<body>
<div class="watermark-bg"></div>
<header>
  <h1>Options Strategy Generator</h1>
  <p>Create robust option strategies and download them as a CSV instantly.</p>
</header>
<div class="container">
  <form method="post" action="/generate">
    <div class="note">Fields auto-update for your selected script and mode.</div>
    <div class="row">
      <div class="col">
        <label for="legs">Legs</label>
        <select id="legs" name="legs" onchange="updateLotSize()">
          <option value="2">2</option>
          <option value="3" selected>3</option>
          <option value="4">4</option>
        </select>
      </div>
      <div class="col">
        <label for="ratio">Ratio (e.g. 1.5.4)</label>
        <input type="text" id="ratio" name="ratio" value="1.5.4" required onchange="updateLotSize()">
      </div>
    </div>
    <div class="row">
      <div class="col">
        <label for="script">Script</label>
        <select id="script" name="script" onchange="updateStrikeFields();updateLotSize();">
          <option value="NIFTY">NIFTY</option>
          <option value="BANKNIFTY">BANKNIFTY</option>
          <option value="SENSEX">SENSEX</option>
          <option value="MIDCAP">MIDCAP</option>
          <option value="FINNIFTY">FINNIFTY</option>
        </select>
      </div>
      <div class="col">
        <label for="expiry">Expiry</label>
        <input type="date" id="expiry" name="expiry" value="2025-08-07" required>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <label for="firstStrikeCE">First Strike CE</label>
        <input type="number" id="firstStrikeCE" name="firstStrikeCE" value="24100" required>
      </div>
      <div class="col">
        <label for="firstStrikePE">First Strike PE</label>
        <input type="number" id="firstStrikePE" name="firstStrikePE" value="25400" required>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <label for="strikeStep">Strike Step</label>
        <input type="number" id="strikeStep" name="strikeStep" value="50" required>
      </div>
      <div class="col">
        <label for="legGap">Leg Gap (comma separated)</label>
        <input type="text" id="legGap" name="legGap" value="250" required>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <label for="totStrikes">Total Strike Rows</label>
        <input type="number" id="totStrikes" name="totStrikes" value="10" required>
      </div>
      <div class="col">
        <label for="buySellPattern">Buy/Sell Pattern (e.g. S.B.S)</label>
        <input type="text" id="buySellPattern" name="buySellPattern" value="S.B.S" required>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <label for="fileName">File Name</label>
        <input type="text" id="fileName" name="fileName" value="NIFTY-strategy.csv">
      </div>
      <div class="col">
        <label for="lotSize">Lot Size</label>
        <input type="text" id="lotSize" name="lotSize" value="75" required readonly>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <label for="mode">Mode</label>
        <select id="mode" name="mode" onchange="updateLotSize()">
          <option value="8184">8184</option>
          <option value="7155">7155</option>
          <option value="IOC">IOC</option>
        </select>
      </div>
    </div>
    <div class="actions">
      <button type="submit">Download CSV</button>
    </div>
  </form>
</div>
<footer>
  &copy; 2025 <span class="brand">Options Strategy Generator</span>. Clean design by Perplexity AI.
</footer>
<script>
function updateStrikeFields() {
    const script = document.getElementById('script').value;
    let ce = 24100, pe = 25400;
    if (script === "BANKNIFTY") { ce = 50000; pe = 49000; }
    else if (script === "SENSEX") { ce = 80000; pe = 78000; }
    else if (script === "MIDCAP") { ce = 12000; pe = 11000; }
    else if (script === "FINNIFTY") { ce = 26000; pe = 25000; }
    document.getElementById('firstStrikeCE').value = ce;
    document.getElementById('firstStrikePE').value = pe;
}
function updateLotSize() {
    const mode = document.getElementById('mode').value;
    let ratio = document.getElementById('ratio').value;
    let script = document.getElementById('script').value;
    let lotPerScript = 75;
    if (script === "BANKNIFTY") lotPerScript = 35;
    else if (script === "SENSEX") lotPerScript = 20;
    else if (script === "MIDCAP") lotPerScript = 140;
    else if (script === "FINNIFTY") lotPerScript = 65;
    let lotValue;
    if (mode === "7155") {
        let pieces = ratio.split('.').filter(x => x).length;
        lotValue = Array(pieces).fill(lotPerScript).join('|');
    } else {
        lotValue = lotPerScript;
    }
    document.getElementById('lotSize').value = lotValue;
}
window.onload = function() {
    updateStrikeFields();
    updateLotSize();
};
</script>
</body>
</html>
