<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Options Strategy Generator - Live Ticker Demo</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link href="https://fonts.googleapis.com/css?family=Inter:400,600&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      min-height: 100vh;
      font-family: 'Inter', Arial, sans-serif;
      background: linear-gradient(120deg,#184175 0%,#2b677a 42%,#e2fdff 100%);
      position: relative;
      overflow-x: hidden;
    }
    .trading-bg {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      opacity: 0.175;
      background: linear-gradient(120deg,#194775 0%,#7adcf4 85%,#e2fdff 100%);
    }
    .trading-bg::after {
      content: "";
      position: absolute;
      left: 0; right: 0; top: 0; bottom: 0;
      pointer-events: none;
      opacity: 0.22;
      background: url("data:image/svg+xml,%3Csvg width='900' height='500' xmlns='http://www.w3.org/2000/svg'%3E%3Cg opacity='0.43'%3E%3Cpolyline points='80,450 160,320 230,280 350,360 440,80 600,180 730,120 820,390' style='fill:none;stroke:%2343e7bc;stroke-width:8;stroke-linecap:round;stroke-linejoin:round;' /%3E%3Crect x='140' y='370' width='18' height='62' rx='6' fill='%23f99f00'/%3E%3Crect x='320' y='390' width='18' height='32' rx='6' fill='%239b6ffe'/%3E%3Crect x='350' y='305' width='8' height='46' rx='3' fill='%239b6ffe'/%3E%3Crect x='360' y='264' width='8' height='46' rx='3' fill='%23e9176e'/%3E%3Crect x='430' y='304' width='8' height='65' rx='3' fill='%239ea6da'/%3E%3Crect x='440' y='254' width='8' height='46' rx='3' fill='%2343e7bc'/%3E%3Ccircle cx='600' cy='180' r='18' fill='%2343e7bc'/%3E%3Ccircle cx='820' cy='390' r='26' fill='%239b6ffe'/%3E%3C/g%3E%3Cg opacity='0.20'%3E%3Ctext x='160' y='465' font-size='36' fill='%239b6ffe' font-family='Arial' opacity='0.19'%3E$%3C/text%3E%3Ctext x='675' y='97' font-size='29' fill='%23f99f00' font-family='Arial' opacity='0.17'%3Eâ‚¹%3C/text%3E%3Ctext x='640' y='49' font-size='27' fill='%2343e7bc' font-family='Arial' opacity='0.14'%3EðŸ’¹%3C/text%3E%3C/g%3E%3Cg opacity='0.11'%3E%3Ctext x='415' y='90' font-size='42' fill='%2343e7bc' font-family='Arial'%3Eâ–²%3C/text%3E%3Ctext x='720' y='470' font-size='38' fill='%23e9176e' font-family='Arial'%3Eâ–¼%3C/text%3E%3C/g%3E%3Cg opacity='0.15'%3E%3Crect x='740' y='260' width='10' height='38' rx='5' fill='%232bb2f9' /%3E%3Crect x='780' y='305' width='8' height='55' rx='3' fill='%23f99f00' /%3E%3C/g%3E%3Cg opacity='0.12'%3E%3Crect x='210' y='177' width='15' height='40' rx='6' fill='%239b6ffe'/%3E%3Crect x='230' y='157' width='15' height='45' rx='6' fill='%2343e7bc'/%3E%3C/g%3E%3C/svg%3E");
      background-size: 900px 500px;
      background-repeat: no-repeat;
      background-position: right bottom;
    }
    .datetime-bar {
      position: relative;
      z-index:2;
      text-align:center;
      font-size:1.32rem;
      background:rgba(250,255,255,0.54);
      box-shadow:0 6px 18px #64d4e544;
      width:100vw;
      padding:14px 0 6px 0;
      font-family: 'Inter', Arial, sans-serif;
      color:#184175;
      font-weight:600;
      letter-spacing:0.07em;
    }
    .ticker-bar {
      width: 100vw;
      overflow: hidden;
      background: #f7fcff;
      box-shadow: 0 3px 12px #64d4e535;
      border-top: 1.5px solid #dde8ee;
      border-bottom: 1.5px solid #dde8ee;
      position: relative;
      z-index: 3;
      height: 46px;
    }
    .ticker-track {
      display: flex;
      align-items: center;
      gap: 36px;
      height: 46px;
      animation: ticker-scroll 32s linear infinite;
    }
    .ticker-item {
      font-family: 'Inter', Arial, sans-serif;
      color: #184175;
      font-size: 1.09rem;
      font-weight: 600;
      padding: 0 13px;
      border-right: 2px solid #e3f3f7;
      display: flex;
      align-items: center;
      min-width: 190px;
      white-space: nowrap;
      background: #f7fcff;
      border-radius: 7px 7px 7px 7px;
      margin: 0 0;
    }
    .ticker-item:last-child {border: none;}
    .up {color: #0aa869; font-weight:700;}
    .down {color: #e9176e; font-weight:700;}
    .idx-symbol {color:#227773;font-weight:700;font-size:1em;margin-right:6px;}
    @keyframes ticker-scroll {
      0%   { transform: translateX(0); }
      100% { transform: translateX(-53%); }
    }
    .container {
      max-width: 650px;
      margin: 54px auto 36px auto;
      background: #fff;
      border-radius: 24px;
      box-shadow: 0 8px 38px #86c0e924;
      padding: 38px 30px 28px 30px;
      position: relative;
      z-index: 2;
    }
    form {
      width: 100%;
    }
    .row {
      display: flex;
      gap: 22px;
      margin-bottom: 19px;
      flex-wrap: wrap;
    }
    .col {
      flex: 1;
      min-width: 220px;
      display: flex;
      flex-direction: column;
      margin-bottom: 7px;
    }
    label {
      color: #229ebe;
      font-weight: 600;
      margin-bottom: 5px;
      font-size: 1rem;
    }
    input, select {
      font-size: 1.07rem;
      border: 1.45px solid #bdeff9;
      border-radius: 8px;
      padding: 11px 12px;
      background: #f6fbfc;
      color: #227773;
      outline: none;
      margin-bottom: 1px;
      transition: border 0.18s;
    }
    input:focus, select:focus {
      border-color: #44e7bc;
      background: #ecfff7;
    }
    input[readonly] {
      background: #eeeeee;
      color: #82a2aa;
    }
    .actions {
      text-align: center;
      margin-top: 32px;
    }
    button {
      background: linear-gradient(90deg, #43e7bc 40%, #36aebb 100%);
      color: #fff;
      font-size: 1.18rem;
      font-family: inherit;
      border-radius: 50px;
      border: none;
      padding: 15px 56px;
      cursor: pointer;
      font-weight: 600;
      letter-spacing: 0.5px;
      box-shadow: 0 6px 18px #79e7e722;
      transition: background 0.18s, transform 0.13s;
    }
    button:hover {
      background: linear-gradient(90deg, #41d8be 30%, #158ced 90%);
      transform: translateY(-2px) scale(1.025);
    }
    .note {
      color: #128973;
      font-size: 0.99rem;
      margin: 3px 0 17px 0;
    }
    footer {
      text-align: center;
      font-size: 0.97rem;
      background: linear-gradient(90deg,#4fa7ee 0%,#96f1cd 100%);
      color: #1c464b;
      margin-top: 42px;
      letter-spacing: 0.3px;
      font-weight: 400;
      z-index: 2;
      position: relative;
      padding:10px 0;
    }
    .brand {
      font-weight: 700;
      color: #077880;
      letter-spacing: 0.34px;
      margin-left: 3px;
    }
    @media (max-width: 700px) {
      .ticker-item, .ticker-track {font-size:0.9rem;min-width:121px;height:32px;}
      .ticker-bar{height:34px;}
      .container{padding:18px 2vw;}
    }
    @media (max-width: 500px) {
      .datetime-bar{font-size:0.87rem;}
      .ticker-bar{height:28px;}
      .ticker-item{font-size:0.76rem;min-width:86px;}
      .ticker-track{gap:13px;}
      .container{padding:5px 0;}
    }
  </style>
</head>
<body>
<div class="trading-bg"></div>
<div class="datetime-bar" id="datetime"></div>
<div class="ticker-bar" id="ticker">
  <div class="ticker-track">
    <div class="ticker-item"><span class="idx-symbol">NIFTY 50</span> <span class="index-value">24631.30</span> <span class="up">+80.40 (0.33%)</span></div>
    <div class="ticker-item"><span class="idx-symbol">NIFTY Bank</span> <span class="index-value">55341.85</span> <span class="up">+190.75 (0.35%)</span></div>
    <div class="ticker-item"><span class="idx-symbol">SENSEX</span> <span class="index-value">80597.66</span> <span class="down">-45.60 (-0.06%)</span></div>
    <div class="ticker-item"><span class="idx-symbol">FINNIFTY</span> <span class="index-value">22831.15</span> <span class="down">-21.60 (-0.09%)</span></div>
    <div class="ticker-item"><span class="idx-symbol">MIDCAP</span> <span class="index-value">59721.21</span> <span class="up">+102.55 (0.17%)</span></div>
  </div>
</div>
<div class="container">
  <form method="post" action="/generate">
    <div class="note">Fields auto-update for your selected script and mode.</div>
    <div class="row">
      <div class="col">
        <label for="legs">Legs</label>
        <select id="legs" name="legs" onchange="updateLotSize()">
          <option value="2">2</option>
          <option value="3" selected>3</option>
          <option value="4">4</option>
        </select>
      </div>
      <div class="col">
        <label for="ratio">Ratio (e.g. 1.5.4)</label>
        <input type="text" id="ratio" name="ratio" value="1.5.4" required onchange="updateLotSize()">
      </div>
    </div>
    <div class="row">
      <div class="col">
        <label for="script">Script</label>
        <select id="script" name="script" onchange="updateStrikeFields();updateLotSize();">
          <option value="NIFTY">NIFTY</option>
          <option value="BANKNIFTY">BANKNIFTY</option>
          <option value="SENSEX">SENSEX</option>
          <option value="MIDCAP">MIDCAP</option>
          <option value="FINNIFTY">FINNIFTY</option>
        </select>
      </div>
      <div class="col">
        <label for="expiry">Expiry</label>
        <input type="date" id="expiry" name="expiry" value="2025-08-07" required>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <label for="firstStrikeCE">First Strike CE</label>
        <input type="number" id="firstStrikeCE" name="firstStrikeCE" value="24100" required>
      </div>
      <div class="col">
        <label for="firstStrikePE">First Strike PE</label>
        <input type="number" id="firstStrikePE" name="firstStrikePE" value="25400" required>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <label for="strikeStep">Strike Step</label>
        <input type="number" id="strikeStep" name="strikeStep" value="50" required>
      </div>
      <div class="col">
        <label for="legGap">Leg Gap (comma separated)</label>
        <input type="text" id="legGap" name="legGap" value="250" required>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <label for="totStrikes">Total Strike Rows</label>
        <input type="number" id="totStrikes" name="totStrikes" value="10" required>
      </div>
      <div class="col">
        <label for="buySellPattern">Buy/Sell Pattern (e.g. S.B.S)</label>
        <input type="text" id="buySellPattern" name="buySellPattern" value="S.B.S" required>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <label for="fileName">File Name</label>
        <input type="text" id="fileName" name="fileName" value="NIFTY-strategy.csv">
      </div>
      <div class="col">
        <label for="lotSize">Lot Size</label>
        <input type="text" id="lotSize" name="lotSize" value="75" required readonly>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <label for="mode">Mode</label>
        <select id="mode" name="mode" onchange="updateLotSize()">
          <option value="8184">8184</option>
          <option value="7155">7155</option>
          <option value="IOC">IOC</option>
        </select>
      </div>
    </div>
    <div class="actions">
      <button type="submit">Download CSV</button>
    </div>
  </form>
</div>
<footer>
  &copy; 2025 <span class="brand">Options Strategy Generator</span>. Clean design by Perplexity AI.
</footer>
<script>
function updateStrikeFields() {
    const script = document.getElementById('script').value;
    let ce = 24100, pe = 25400;
    if (script === "BANKNIFTY") { ce = 50000; pe = 49000; }
    else if (script === "SENSEX") { ce = 80000; pe = 78000; }
    else if (script === "MIDCAP") { ce = 12000; pe = 11000; }
    else if (script === "FINNIFTY") { ce = 26000; pe = 25000; }
    document.getElementById('firstStrikeCE').value = ce;
    document.getElementById('firstStrikePE').value = pe;
}
function updateLotSize() {
    const mode = document.getElementById('mode').value;
    let ratio = document.getElementById('ratio').value;
    let script = document.getElementById('script').value;
    let lotPerScript = 75;
    if (script === "BANKNIFTY") lotPerScript = 35;
    else if (script === "SENSEX") lotPerScript = 20;
    else if (script === "MIDCAP") lotPerScript = 140;
    else if (script === "FINNIFTY") lotPerScript = 65;
    let lotValue;
    if (mode === "7155") {
        let pieces = ratio.split('.').filter(x => x).length;
        lotValue = Array(pieces).fill(lotPerScript).join('|');
    } else {
        lotValue = lotPerScript;
    }
    document.getElementById('lotSize').value = lotValue;
}
function updateDateTime() {
  const dt = new Date();
  let day = dt.toLocaleDateString(undefined, {weekday:'long'});
  let date = dt.toLocaleDateString(undefined, {month:'long',day:'numeric',year:'numeric'});
  let hour = dt.getHours();
  let minute = dt.getMinutes();
  let second = dt.getSeconds();
  let pad = n => n<10?"0"+n:n;
  let time = `${pad(hour)}:${pad(minute)}:${pad(second)}`;
  document.getElementById('datetime').textContent = `${day}, ${date}, ${time}`;
}
updateStrikeFields();
updateLotSize();
updateDateTime();
setInterval(updateDateTime, 1000);

// ---- Ticker auto-update demo code ---
function randomValue(base) {
  return (base + (Math.random() - 0.5) * base * 0.01).toFixed(2);
}
function randomChange(base) {
  let up = Math.random() > 0.5;
  let chg = (Math.random() * 200 - 100).toFixed(2);
  let pct = (Math.abs(chg) / base * 100).toFixed(2);
  return {
    up: up,
    chg: (up ? "+" : "") + chg,
    pct: (up ? "+" : "") + pct
  };
}
setInterval(() => {
  const items = document.querySelectorAll('.ticker-item');
  let bases = [24631, 55341, 80597, 22831, 59721];
  items.forEach((item, i) => {
    let val = randomValue(bases[i]);
    let move = randomChange(bases[i]);
    item.querySelector('.index-value').textContent = val;
    let moveEl = item.querySelector('.up, .down');
    moveEl.textContent = `${move.chg} (${move.pct}%)`;
    moveEl.className = move.up ? 'up' : 'down';
  });
}, 4000);
</script>
</body>
</html>
